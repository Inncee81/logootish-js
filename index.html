<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@anchor-logoot/logootish-js</title>
	<meta name="description" content="Documentation for @anchor-logoot/logootish-js">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@anchor-logoot/logootish-js</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>@anchor-logoot/logootish-js</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#logootish" id="logootish" style="color: inherit; text-decoration: none;">
					<h1>Logootish</h1>
				</a>
				<p><img src="https://img.shields.io/github/v/release/kb1rd/logootish-js" alt="GitHub release (latest SemVer)">
					<img src="https://img.shields.io/matrix/matrix-collaboration:kb1rd.net?label=chat%20on%20%23matrix-collaboration%3Akb1rd.net&server_fqdn=matrix.org" alt="Matrix">
					<img src="https://img.shields.io/github/workflow/status/KB1RD/logootish-js/Yarn%20CI/dev?label=dev%20build%2Ftest" alt="GitHub Workflow Status (branch)">
				<img src="https://img.shields.io/github/license/kb1rd/logootish-js" alt="GitHub"></p>
				<p>The Logootish CRDT algorithm used by the Matrix Notepad. See the documentation
					<a href="https://github.com/KB1RD/matrix-notepad/wiki/Logootish">on the Notepad wiki</a>
					for information about the algorithm and the <a href="https://logootish-js.matrix-notepad.kb1rd.net/">TypeDoc</a>
					Currently, this is only used in <code>matrix-notepad</code>, but the code is generic
					enough that it could be used in any collaboration system. At the moment, this
				only contains an implementation of an algorithm that I call AnchorLogoot.</p>
				<p>Based on <a href="https://github.com/krasimir/webpack-library-starter">https://github.com/krasimir/webpack-library-starter</a></p>
				<a href="#design-philosophy" id="design-philosophy" style="color: inherit; text-decoration: none;">
					<h2>Design Philosophy</h2>
				</a>
				<p>This algorithm, in contrast to others such as
					<a href="https://github.com/automerge/automerge">Automerge</a> or
					<a href="https://github.com/yjs/yjs">Y.js</a> is both data <em>and</em> network agnostic. This
					means that the <code>ListDocumentModel</code> contained here can be used for any ordered
					list that allows duplication, such as a <code>string</code>, array, or a rich text data
					type. This <em>does</em> mean that it&#39;s up to you to perform operations on whatever
					your data model is, but it&#39;s quite easy. However, if you want to save the state
					(in IndexedDB or wherever), you will have to implement this yourself. If you
					are interested in using this in your own project, <strong>please submit an issue to
					request that I clear up the documentation.</strong> I&#39;m focusing on making the Nodepad
				work, so docs here are not at the top of my priority list.</p>
				<p>The <code>logootish-js</code> codebase was forked out of
					<a href="https://matrix-notepad.kb1rd.net">Matrix Notepad</a> and, shortly thereafter,
					converted to TypeScript. This is by far the most complex and important part of
				the Notepad.</p>
				<p>Currently, <code>logootish-js</code> only supports the <code>ListDocumentModel</code> type. Other
				CRDT building blocks will be added in the future.</p>
				<a href="#listdocumentmodel" id="listdocumentmodel" style="color: inherit; text-decoration: none;">
					<h3>ListDocumentModel</h3>
				</a>
				<p><a href="https://github.com/KB1RD/matrix-notepad/wiki/Logootish">Notepad Wiki</a>
				<a href="https://logootish-js.matrix-notepad.kb1rd.net/modules/_listmodel_index_.html">TypeDoc</a></p>
				<p>Note that the Wiki contains information for the over-Matrix protocol used to
				transfer Logootish operations. That is not part of this library.</p>
				<p>The <code>ListDocumentModel</code> contains a mapping of Logootish (custom algorithm)
					positions to text positions in the local document. It is capable of
					bi-directional mappings. The Logoot equivalent of a local insertion is
					determined through the <code>insertLocal</code> method and the Logoot equivalent of a
					local removal is determined through the <code>removeLocal</code> function. The local
					operations that must be performed for a given Logoot operation are determined
				by the <code>insertLogoot</code> and <code>removeLogoot</code> methods, respectively.</p>
				<p>Conflict resolution is mostly implemented, but mark operations need to be fixed
					(issues #11 and #12) before that&#39;s ready for normal usage. A new algorithm has
					been created known as &quot;Anchor Logoot.&quot; This is not compatible with previous
					versions below <code>0.4.0</code>. Currently, conflict creation is experimental and is
				only implemented in the model. Mark operations are not created yet.</p>
				<a href="#performance" id="performance" style="color: inherit; text-decoration: none;">
					<h2>Performance</h2>
				</a>
				<p>Most of my time has been spent making this work in the first place. Because of
					that, it&#39;s a bit slow, but there are a few areas where it can be easily sped up
					(see the issues). I also have my CI generating flamegraph(s), such as the one
				<a href="https://logootish-js.matrix-notepad.kb1rd.net/flamegraph/test/listmodel-nc.perf.js/flamegraph.html#%7B%22merged%22:true,%22nodeId%22:null,%22excludeTypes%22:%5B%22cpp%22,%22regexp%22,%22v8%22,%22native%22,%22init%22,%22core%22%5D%7D">here</a>.</p>
				<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
					<h2>Installation</h2>
				</a>
				<pre><code class="language-sh"><span class="hljs-comment"># Grab the repo</span>
git <span class="hljs-built_in">clone</span> https://github.com/KB1RD/logootish-js.git

<span class="hljs-comment"># Install packages</span>
yarn install

<span class="hljs-comment"># Build everything</span>
yarn run build
yarn run build:docs

<span class="hljs-comment"># Run tests (currently broken)</span>
yarn run <span class="hljs-built_in">test</span>
yarn run <span class="hljs-built_in">test</span>:watch
yarn run <span class="hljs-built_in">test</span>:cover</code></pre>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h2>Usage</h2>
				</a>
				<p>Unfortunately, the last update broke most of the examples I had here. I will
				eventually put new usage examples here and describe the architecture.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_bst_.html">&quot;bst&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_compare_.html">&quot;compare&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_debug_.html">&quot;debug&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_index_.html">&quot;index&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_ints_.html">&quot;ints&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_listmodel_branch_.html">&quot;listmodel/branch&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_listmodel_index_.html">&quot;listmodel/index&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_listmodel_int_.html">&quot;listmodel/int&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_listmodel_node_.html">&quot;listmodel/node&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_listmodel_position_.html">&quot;listmodel/position&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_utils_.html">&quot;utils&quot;</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>